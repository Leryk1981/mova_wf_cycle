{
  "envelope_id": "env.mova_check_run_v1",
  "verb": "validate",
  "resource": "note",
  "input": {
    "context_kind": "schema",
    "file_path": "lab/schemas/ds.dpp_passport_normalize_input_v1.schema.json",
    "content_after": "{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://mova.dev/lab/schemas/ds.dpp_passport_normalize_input_v1.schema.json\",\n  \"title\": \"DPP Passport Normalize Input (lab)\",\n  \"description\": \"Input data for normalizing a single battery passport into the lab extended form. V1 mirrors ds.lab_battery_passport_extended_v1 so the engine can start as a near-identity transform.\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"passport_id\": {\n      \"type\": \"string\"\n    },\n    \"manufacturer_name\": {\n      \"type\": \"string\"\n    },\n    \"manufacturing_date\": {\n      \"type\": \"string\",\n      \"format\": \"date\"\n    },\n    \"manufacturing_location\": {\n      \"type\": \"string\"\n    },\n    \"carbon_footprint\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"value_kg_co2e\": {\n          \"type\": \"number\"\n        },\n        \"method\": {\n          \"type\": \"string\"\n        },\n        \"verification_status\": {\n          \"type\": \"string\"\n        }\n      },\n      \"required\": [\n        \"value_kg_co2e\",\n        \"method\",\n        \"verification_status\"\n      ],\n      \"additionalProperties\": false\n    },\n    \"materials\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"cobalt\": {\n          \"type\": \"object\",\n          \"properties\": {\n            \"source\": {\n              \"type\": \"string\"\n            },\n            \"recycled_pct\": {\n              \"type\": \"number\"\n            },\n            \"traceability\": {\n              \"$ref\": \"https://mova.dev/lab/schemas/ds.lab_traceability_summary_v1.schema.json\"\n            }\n          },\n          \"required\": [\n            \"source\",\n            \"traceability\"\n          ],\n          \"additionalProperties\": false\n        }\n      },\n      \"required\": [\n        \"cobalt\"\n      ],\n      \"additionalProperties\": false\n    },\n    \"external_sources\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"$ref\": \"https://mova.dev/lab/schemas/ds.lab_external_source_ref_v1.schema.json\"\n      }\n    },\n    \"regulation_tags\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\": \"Free-form tags like 'EU_BATTERY_REG_2023.Annex_XIII.3b'.\"\n    }\n  },\n  \"required\": [\n    \"passport_id\",\n    \"manufacturer_name\",\n    \"manufacturing_date\",\n    \"manufacturing_location\",\n    \"carbon_footprint\",\n    \"materials\"\n  ],\n  \"additionalProperties\": false\n}",
    "change_summary": "Add ds.dpp_passport_normalize_input_v1 schema for DPP normalization engine input.",
    "check_level": "validate",
    "mova_core_version": "4.0.0",
    "target_core_version": "4.1.0-draft"
  },
  "meta": {
    "domain": "dpp_lab",
    "labels": [
      "dpp_lab",
      "L3_01",
      "dpp_passport_normalize_contracts"
    ]
  }
}

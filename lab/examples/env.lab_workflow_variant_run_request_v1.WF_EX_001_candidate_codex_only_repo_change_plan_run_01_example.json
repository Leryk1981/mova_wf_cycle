{
  "mova_version": "4.0.0",
  "envelope_type": "env.lab_workflow_variant_run_request_v1",
  "envelope_id": "env.lab_workflow_variant_run_request_v1.WF_EX_001_candidate_codex_only_repo_change_plan_run_01_example",
  "requested_by": "codex_cli",
  "requested_at": "2025-12-10T13:45:00Z",
  "meta": {
    "project_id": "mova_skills_lab",
    "labels": [
      "WF_LAB_05",
      "WF_EX_001",
      "lab_workflow",
      "baseline_vs_codex"
    ]
  },
  "payload": {
    "experiment_id": "WF_EX_001_repo_change_plan_vs_agents_v1",
    "procedure": {
      "procedure_id": "WF_EX_001_candidate_codex_only_repo_change_plan_v1",
      "title": "WF-EX-001 candidate: repo_change_plan workflow (codex_only)",
      "description": "Codex-only variant of repo_change_plan workflow: operator provides high-level goal, Codex plans, applies changes, tests, and snapshots with minimal human steps.",
      "domain": "repo_change_plan_workflow",
      "version": "1.0.0",
      "origin_type": "candidate",
      "origin_ref": "feature/lab-workflow-experiments-v1:WF_LAB_05",
      "steps": [
        {
          "step_id": "step_01_define_goal",
          "name": "Define high-level goal in operator chat",
          "description": "Human operator describes desired repo change in one message.",
          "actor_role": "human_operator",
          "inputs": ["high_level_goal"],
          "outputs": ["codex_prompt_initial"],
          "tools": []
        },
        {
          "step_id": "step_02_codex_expand_and_plan",
          "name": "Codex expands goal and generates repo_change_plan",
          "description": "Codex uses skill.repo_code_change_plan_basic to produce a concrete plan from the high-level goal.",
          "actor_role": "agent_codex",
          "inputs": ["codex_prompt_initial"],
          "outputs": ["repo_change_plan_env_and_run_files"],
          "tools": ["skill.repo_code_change_plan_basic"]
        },
        {
          "step_id": "step_03_codex_apply_changes",
          "name": "Apply code and data changes according to plan (codex_only)",
          "description": "Codex executes plan steps, editing repository files without additional operator intervention.",
          "actor_role": "agent_codex",
          "inputs": ["repo_change_plan_env_and_run_files"],
          "outputs": ["modified_repo_state"],
          "tools": ["editor", "git"]
        },
        {
          "step_id": "step_04_codex_run_tests",
          "name": "Run tests and validators",
          "description": "Codex runs npm test / validators to verify changes.",
          "actor_role": "agent_codex",
          "inputs": ["modified_repo_state"],
          "outputs": ["test_results"],
          "tools": ["npm test"]
        },
        {
          "step_id": "step_05_snapshot",
          "name": "Take repo snapshot via skill.repo_snapshot_basic",
          "description": "Codex captures repository snapshot after tests.",
          "actor_role": "agent_codex",
          "inputs": ["modified_repo_state", "test_results"],
          "outputs": ["snapshot_artifacts"],
          "tools": ["skill.repo_snapshot_basic"]
        },
        {
          "step_id": "step_06_operator_review",
          "name": "Operator quick review of diff and tests",
          "description": "Human operator reviews snapshot artifacts and test results.",
          "actor_role": "human_operator",
          "inputs": ["snapshot_artifacts", "test_results"],
          "outputs": ["operator_feedback"],
          "tools": []
        }
      ]
    },
    "agent_profile": {
      "agent_id": "codex_only",
      "model_family": "codex",
      "profile_id": "codex_vscode_main"
    },
    "test_data_ref": "lab/examples/env.repo_change_plan_run_v1.mova_skills_lab.WF_LAB_02_WF_EX_001_baseline_and_config.json"
  }
}

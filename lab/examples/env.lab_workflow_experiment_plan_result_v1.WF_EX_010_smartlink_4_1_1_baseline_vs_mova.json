{
  "mova_version": "4.0.0",
  "envelope_type": "env.lab_workflow_experiment_plan_result_v1",
  "envelope_id": "env.lab_workflow_experiment_plan_result_v1.WF_EX_010_smartlink_4_1_1_baseline_vs_mova",
  "requested_by": "codex_cli",
  "requested_at": "2025-12-11T11:00:00Z",
  "meta": {
    "project_id": "mova_skills_lab",
    "labels": [
      "WF_EX_010",
      "smartlink",
      "mova_4_1_1",
      "plan_result"
    ]
  },
  "payload": {
    "experiment_id": "WF_EX_010_smartlink_4_1_1_baseline_vs_mova",
    "scope": {
      "objects_in_scope": [
        "ds.smartlink.rules.v1",
        "env.smartlink.default.v1",
        "global.smartlink.v1",
        "meta.smartlink.v1"
      ],
      "out_of_scope": [
        "worker",
        "src",
        "config",
        "tests",
        "deploy"
      ],
      "baseline_artifacts": [
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/ds.smartlink_rules_v1.schema.json",
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/env.smartlink_default_v1.json",
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/global.smartlink_v1.json",
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/meta.smartlink_v1.json"
      ],
      "candidate_artifacts": [
        "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/ds.smartlink_rules_v1.schema.json",
        "lab/experiments/smartlink_4_1_1_candidate_ex010/envelopes/env.smartlink_default_v1.json",
        "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/global.smartlink_v1.json",
        "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/meta.smartlink_v1.json"
      ]
    },
    "plan_steps": [
      {
        "id": "rules.align.fields",
        "target": "ds.smartlink.rules.v1",
        "description": "Порівняти baseline rules із candidate; виписати поля, що мають відображення в env.smartlink.default.v1 та MOVA 4.1.1 security/text catalogs (geo/lang/device/utm/referrer/debug, start/end windows, weights, fallback_target).",
        "expected_outputs": [
          "Список обов'язкових і опційних полів rules для candidate v1.",
          "Mapping полів rules → env inputs."
        ]
      },
      {
        "id": "env.align.contract",
        "target": "env.smartlink.default.v1",
        "description": "Уточнити envelope: форма запиту/відповіді, debug/decision/target structure; явні посилання на rules fields; узгодження з MOVA 4.1.1 security/text-channel вимогами.",
        "expected_outputs": [
          "Оновлений перелік полів request/response у envelope для candidate.",
          "Посилання на rules/global/meta у описі envelope."
        ]
      },
      {
        "id": "global.catalog.align",
        "target": "global.smartlink.v1",
        "description": "Звірити каталоги/словники з правилами та envelope (roles, resources, text channels, events). Вирівняти з MOVA 4.1.1 global catalogs (security/text).",
        "expected_outputs": [
          "Перелік елементів catalog/roles/resources, які використовуються rules/env.",
          "Гепи щодо MOVA 4.1.1 global catalogs."
        ]
      },
      {
        "id": "meta.package.describe",
        "target": "meta.smartlink.v1",
        "description": "Описати версію пакета, залежності від MOVA 4.1.1, policy/constraints, зв'язки з baseline; зафіксувати scope (4 JSON) і out-of-scope (worker).",
        "expected_outputs": [
          "Оновлена meta з версією, сумісністю, посиланням на spec 4.1.1.",
          "Явний список out-of-scope артефактів."
        ]
      }
    ],
    "out_of_scope_steps": [
      "Будь-які зміни у worker/src/config/tests/deploy."
    ],
    "notes": "План сформовано для 4 JSON-артефактів SmartLink; будь-які worker/infra кроки ігноруються у WF_EX_010."
  }
}

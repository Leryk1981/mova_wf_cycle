{
  "mova_version": "4.0.0",
  "envelope_type": "env.lab_workflow_experiment_plan_result_v1",
  "envelope_id": "env.lab_workflow_experiment_plan_result_v1.WF_EX_010_smartlink_4_1_1_baseline_vs_mova",
  "requested_by": "codex_cli",
  "requested_at": "2025-12-11T11:00:00Z",
  "meta": {
    "project_id": "mova_skills_lab",
    "labels": [
      "WF_EX_010",
      "smartlink",
      "mova_4_1_1",
      "plan_result"
    ]
  },
  "payload": {
    "experiment_id": "WF_EX_010_smartlink_4_1_1_baseline_vs_mova",
    "scope": {
      "objects_in_scope": [
        "ds.smartlink.rules.v1",
        "env.smartlink.default.v1",
        "global.smartlink.v1",
        "meta.smartlink.v1"
      ],
      "out_of_scope": [
        "worker",
        "src",
        "config",
        "tests",
        "deploy"
      ],
      "baseline_artifacts": [
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/ds.smartlink_rules_v1.schema.json",
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/env.smartlink_default_v1.json",
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/global.smartlink_v1.json",
        "lab/experiments/smartlink_baseline/mova_smartlink/schemas/meta.smartlink_v1.json"
      ],
      "candidate_artifacts": [
        "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/ds.smartlink_rules_v1.schema.json",
        "lab/experiments/smartlink_4_1_1_candidate_ex010/envelopes/env.smartlink_default_v1.json",
        "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/global.smartlink_v1.json",
        "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/meta.smartlink_v1.json"
      ]
    },
    "plan_steps": [
      {
        "id": "rules.align.fields",
        "target": "ds.smartlink.rules.v1",
        "description": "Compare baseline rules with the candidate; list fields reflected in env.smartlink.default.v1 and MOVA 4.1.1 security/text catalogs (geo/lang/device/utm/referrer/debug, start/end windows, weights, fallback_target).",
        "expected_outputs": [
          "List of required and optional rules fields for candidate v1.",
          "Mapping of rules fields to envelope inputs."
        ]
      },
      {
        "id": "env.align.contract",
        "target": "env.smartlink.default.v1",
        "description": "Clarify the envelope: request/response shape, debug/decision/target structure; explicit references to rules fields; alignment with MOVA 4.1.1 security/text-channel requirements.",
        "expected_outputs": [
          "Updated list of request/response fields in the envelope for the candidate.",
          "References to rules/global/meta in the envelope description."
        ]
      },
      {
        "id": "global.catalog.align",
        "target": "global.smartlink.v1",
        "description": "Check catalogs/vocab with rules and envelope (roles, resources, text channels, events). Align with MOVA 4.1.1 global catalogs (security/text).",
        "expected_outputs": [
          "List of catalog/roles/resources elements used by rules/env.",
          "Gaps against MOVA 4.1.1 global catalogs."
        ]
      },
      {
        "id": "meta.package.describe",
        "target": "meta.smartlink.v1",
        "description": "Describe the package version, dependencies on MOVA 4.1.1, policy/constraints, links to baseline; record scope (four JSON files) and out-of-scope (worker).",
        "expected_outputs": [
          "Updated meta with version, compatibility, and reference to spec 4.1.1.",
          "Explicit list of out-of-scope artifacts."
        ]
      }
    ],
    "out_of_scope_steps": [
      "Any changes in worker/src/config/tests/deploy."
    ],
    "notes": "Plan built for four SmartLink JSON artifacts; any worker/infra steps are ignored in WF_EX_010."
  }
}

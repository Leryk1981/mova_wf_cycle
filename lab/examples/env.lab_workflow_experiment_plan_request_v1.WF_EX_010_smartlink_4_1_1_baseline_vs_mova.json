{
  "mova_version": "4.0.0",
  "envelope_type": "env.lab_workflow_experiment_plan_request_v1",
  "envelope_id": "env.lab_workflow_experiment_plan_request_v1.WF_EX_010_smartlink_4_1_1_baseline_vs_mova",
  "requested_by": "codex_cli",
  "requested_at": "2025-12-11T10:00:00Z",
  "meta": {
    "project_id": "mova_skills_lab",
    "labels": [
      "WF_LAB_SMARTLINK_4_1_1",
      "WF_EX_010",
      "smartlink",
      "mova_4_1_1"
    ]
  },
  "payload": {
    "experiment_config": {
      "experiment_id": "WF_EX_010_smartlink_4_1_1_baseline_vs_mova",
      "title": "WF-EX-010: SmartLink baseline vs MOVA 4.1.1 candidate",
      "description": "Compare the stable SmartLink baseline against a MOVA 4.1.1-aligned candidate (security layer, operator frame, text channels, catalogs) without modifying the baseline.",
      "baseline_procedure_id": "WF_EX_010_baseline_smartlink_v1",
      "domain": "smartlink",
      "agent_profiles": [
        {
          "agent_id": "baseline_reference",
          "model_family": "human_reference",
          "profile_id": "smartlink_baseline_v1"
        },
        {
          "agent_id": "candidate_mova_4_1_1",
          "model_family": "codex",
          "profile_id": "codex_vscode_main"
        }
      ],
      "metrics": [
        {
          "metric_id": "spec_alignment",
          "name": "Spec alignment",
          "description": "Degree of alignment with MOVA 4.1.1 security/operator/text-channel catalogs.",
          "direction": "maximize"
        },
        {
          "metric_id": "operator_clarity",
          "name": "Operator clarity",
          "description": "How clearly the candidate exposes configuration and routing semantics for operators.",
          "direction": "maximize"
        },
        {
          "metric_id": "security_text_channel_support",
          "name": "Security & text-channel support",
          "description": "Coverage of security-layer and text-channel patterns required by MOVA 4.1.1.",
          "direction": "maximize"
        },
        {
          "metric_id": "evolution_readiness",
          "name": "Evolution readiness",
          "description": "Ease of extending the candidate for new SmartLink features without schema churn.",
          "direction": "maximize"
        }
      ],
      "constraints": [
        "Do not modify baseline directory; treat it as read-only.",
        "Do not modify historical Codex candidate; keep as reference only.",
        "Adhere to MOVA 4.1.1 spec snapshot in spec/mova-spec-4.1.1/.",
        "No deploy/build runs in this task; planning/comparison only.",
        "Work strictly inside lab/experiments/* for candidate changes; do not touch core/mova/."
      ],
      "test_data_ref": "smartlink-edge/fixtures/traffic_samples_v1",
      "meta": {
        "labels": [
          "WF_EX_010",
          "smartlink",
          "mova_4_1_1"
        ]
      },
      "ext": {
        "baseline_ref": {
          "type": "directory",
          "path": "lab/experiments/smartlink_baseline/",
          "description": "Stable SmartLink schemas/envelopes from previous series (read-only)."
        },
        "candidate_ref": {
          "type": "directory",
          "path": "lab/experiments/smartlink_4_1_1_candidate_ex010/",
          "description": "First MOVA 4.1.1 candidate (v2 vs prior Codex candidate)."
        },
        "spec_ref": {
          "type": "directory",
          "path": "spec/mova-spec-4.1.1/",
          "description": "MOVA 4.1.1 snapshot: security-layer, operator frame, text channels, catalogs (read-only)."
        },
        "mova_spec_version": "4.1.1",
        "metrics_plan": [
          "Map schemas/envelopes to MOVA 4.1.1 security-layer and text-channel catalogs (inputs/outputs/events).",
          "Validate routing semantics (normalize → evaluate → redirect) with explicit decision/target/debug shapes.",
          "Ensure observability: click/redirect events and logging hooks are present and typed.",
          "Check operator clarity: configuration surfaces and defaults are self-explanatory.",
          "Check evolution readiness: easy to extend with A/B/feature flags without schema churn."
        ],
        "plan_scope": {
          "objects_in_scope": [
            "ds.smartlink.rules.v1",
            "env.smartlink.default.v1",
            "global.smartlink.v1",
            "meta.smartlink.v1"
          ],
          "baseline_artifacts": [
            "lab/experiments/smartlink_baseline/mova_smartlink/schemas/ds.smartlink_rules_v1.schema.json",
            "lab/experiments/smartlink_baseline/mova_smartlink/schemas/env.smartlink_default_v1.json",
            "lab/experiments/smartlink_baseline/mova_smartlink/schemas/global.smartlink_v1.json",
            "lab/experiments/smartlink_baseline/mova_smartlink/schemas/meta.smartlink_v1.json"
          ],
          "candidate_artifacts": [
            "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/ds.smartlink_rules_v1.schema.json",
            "lab/experiments/smartlink_4_1_1_candidate_ex010/envelopes/env.smartlink_default_v1.json",
            "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/global.smartlink_v1.json",
            "lab/experiments/smartlink_4_1_1_candidate_ex010/schemas/meta.smartlink_v1.json"
          ],
          "scenarios": [
            "Simple redirect with fallback target (rules + env).",
            "Geo/lang/device-conditioned route selection (rules fields consumed by env).",
            "UTM/referrer-based campaign override.",
            "Debug/preview flow returning decision/target/debug details.",
            "Observability/catalog alignment via global/meta references."
          ],
          "outputs_expected": [
            "Plan steps з прив'язкою до конкретних файлів з четвірки.",
            "Список полів/секцій для зміни у candidate-файлах.",
            "Gap-аналіз проти MOVA 4.1.1 security/text/global каталогів."
          ]
        ],
        "notes_from_operator": "Увага: ця серія експериментів фокусується виключно на чотирьох JSON-артефактах SmartLink (ds.smartlink.rules.v1, env.smartlink.default.v1, global.smartlink.v1, meta.smartlink.v1). Будь-які worker/конфіг/деплой аспекти SmartLink поза межами плану."
      }
    }
  }
}

{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mova.dev/schemas/core/mova/ds/ds.file_cleanup_snapshot_v1.schema.json",
  "title": "File Cleanup Snapshot v1",
  "description": "Filesystem snapshot for cleanup planning (no mutations).",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "mova_version",
    "snapshot_id",
    "target",
    "taken_at",
    "files",
    "stats"
  ],
  "properties": {
    "mova_version": {
      "type": "string",
      "const": "4.0.0",
      "description": "MOVA core version targeted by this schema."
    },
    "snapshot_id": {
      "type": "string",
      "description": "Identifier of this snapshot."
    },
    "target": {
      "$ref": "https://mova.dev/schemas/core/mova/ds/ds.file_cleanup_target_v1.schema.json",
      "description": "Target that was scanned."
    },
    "taken_at": {
      "type": "string",
      "format": "date-time",
      "description": "Timestamp when the snapshot was taken."
    },
    "files": {
      "type": "array",
      "description": "Entries observed during scan.",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "path",
          "size_bytes",
          "last_modified",
          "kind"
        ],
        "properties": {
          "path": {
            "type": "string",
            "description": "Absolute or root-relative path."
          },
          "size_bytes": {
            "type": "number",
            "description": "Size in bytes (0 for directories)."
          },
          "last_modified": {
            "type": "string",
            "format": "date-time",
            "description": "Last modified timestamp."
          },
          "last_accessed": {
            "type": "string",
            "format": "date-time",
            "description": "Optional last accessed timestamp."
          },
          "kind": {
            "type": "string",
            "enum": [
              "file",
              "dir",
              "symlink",
              "other"
            ],
            "description": "Entry type."
          },
          "extension": {
            "type": "string",
            "description": "File extension without dot (for files)."
          }
        }
      }
    },
    "stats": {
      "type": "object",
      "description": "Summary statistics for the snapshot.",
      "additionalProperties": false,
      "required": [
        "total_files",
        "total_dirs",
        "total_size_bytes"
      ],
      "properties": {
        "total_files": {
          "type": "integer",
          "description": "Number of files."
        },
        "total_dirs": {
          "type": "integer",
          "description": "Number of directories."
        },
        "total_size_bytes": {
          "type": "number",
          "description": "Total size of files in bytes."
        }
      }
    }
  }
}

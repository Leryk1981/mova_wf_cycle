{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "ds.wf_cycle_compare_request_v1.schema.json",
  "title": "ds.wf_cycle_compare_request_v1",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "experiment_id",
    "compare_id",
    "left",
    "right",
    "output_compare_dir"
  ],
  "properties": {
    "experiment_id": { "type": "string", "minLength": 1 },
    "compare_id": { "type": "string", "minLength": 1 },
    "left": {
      "type": "object",
      "additionalProperties": false,
      "required": ["label", "run_dir", "artifacts_dir", "binding_map_path"],
      "properties": {
        "label": { "type": "string", "minLength": 1 },
        "run_dir": { "type": "string", "minLength": 1 },
        "artifacts_dir": { "type": "string", "minLength": 1 },
        "binding_map_path": { "type": "string", "minLength": 1 }
      }
    },
    "right": {
      "type": "object",
      "additionalProperties": false,
      "required": ["label", "run_dir", "artifacts_dir", "binding_map_path"],
      "properties": {
        "label": { "type": "string", "minLength": 1 },
        "run_dir": { "type": "string", "minLength": 1 },
        "artifacts_dir": { "type": "string", "minLength": 1 },
        "binding_map_path": { "type": "string", "minLength": 1 }
      }
    },
    "output_compare_dir": { "type": "string", "minLength": 1 },
    "tools": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "compute_metrics_script": { "type": "string", "minLength": 1 }
      }
    },
    "options": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "write_files": { "type": "boolean", "default": true },
        "fail_on_metrics_mismatch": { "type": "boolean", "default": true },
        "delta_mode": { "type": "string", "enum": ["metrics_only", "basic"], "default": "basic" }
      }
    }
  }
}


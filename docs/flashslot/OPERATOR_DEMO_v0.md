# FlashSlot: operator demo pack v0

## What is FlashSlot
- Pack `packs/flashslot_v0` — deterministic runtime for rapid backfill of freed slots (no external SaaS/AI in production).
- Offer contracts: `packs/flashslot_v0/ds/ds.flashslot_offer_v1.json`.
- The experiment collects multiple hypotheses and chooses a winner by delivery metrics.

## How to collect business input (examples)
- **Dentistry**: service type (cleaning/checkup), slot time, chair/location, base price, allowed discount, channel (SMS/email/app), segment (loyal/lapsed), expiration window.
- **Barbershop**: service (cut/beard/combo), stylist/chair, slot length, price plus upsell (care/mask), outreach channel, segment (VIP/new/lapsed), cancellation/reschedule rules.
- **Restaurant**: menu/set type, table size, booking window, minimum check/deposit, channel (push/email/app), segment (regulars/corporate/tourists), offer validity.

## How to get A/B/C hypotheses (external model)
1. Take the collected business context and send it to any model outside the runtime.
2. Use `packs/flashslot_v0/examples/prompts/prompt_hypothesis_set_v1.md` — it produces a set descriptor plus three hypothesis files (A/B/C) with valid offers.
3. Save the set (for example, `packs/flashslot_v0/examples/hypothesis_set_001_dentist_abc.json`) and the three offers under `packs/flashslot_v0/examples/hypotheses/` or nearby.

## How to get a valid offer JSON
- `packs/flashslot_v0/examples/prompts/prompt_offer_v1.md` outputs clean JSON for `ds.flashslot_offer_v1`.
- You can run it on any model (local or cloud) — the runtime does not depend on it.

## How to run the experiment locally (one command)
```bash
npm run flashslot:experiment -- --set packs/flashslot_v0/examples/hypothesis_set_001_dentist_abc.json --driver noop --dry-run --out lab/flashslot_runs/<runId>/flashslot_experiment
```
- `--out` optional; if omitted, the CLI writes to `lab/flashslot_runs/<autogenerated>/flashslot_experiment`.
- `--driver noop` and `--dry-run` keep all artifacts and require no external services.

## Where to find artifacts
- `experiment_summary.json` — summary for each A/B/C and the winner.
- `winner_pack/` — copied offer/request/result/stdout/stderr/evidence for the winner.
- `attempts/<hypothesis_id>/` — offer, input request, result, and logs for each hypothesis.
- Smoke for CI without Inngest: `npm run smoke:flashslot:experiment` (uses committed dentistry and barbershop sets `hypothesis_set_001_dentist_abc.json`, `hypothesis_set_002_barbershop_abc.json`; noop, dry-run).
